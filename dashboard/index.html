<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twilio Responder Dashboard</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="static/css/dashboard.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸš¨ Twilio Emergency Responder Dashboard</h1>
            <p class="subtitle">Real-time monitoring and control</p>
        </header>

        <!-- Configuration Section -->
        <section class="config-section">
            <h2>Configuration</h2>
            <div class="input-group">
                <label for="apiUrl">Twilio Responder API URL:</label>
                <input type="text" id="apiUrl" placeholder="https://your-domain.com" value="http://localhost:5000">
                <button onclick="saveConfig()">Save</button>
            </div>
        </section>

        <!-- System Status Section -->
        <section class="status-section">
            <h2>System Status</h2>
            <div class="status-card" id="statusCard">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-text" id="statusText">Checking...</span>
                </div>
                <p class="status-message" id="statusMessage">Connecting to system...</p>
                <p class="last-updated">Last updated: <span id="lastUpdated">Never</span></p>
            </div>
            <button onclick="refreshStatus()" class="refresh-btn">ðŸ”„ Refresh Status</button>
        </section>

        <!-- Emergency Trigger Section -->
        <section class="trigger-section">
            <h2>Trigger Emergency</h2>
            <div class="form-card">
                <div class="form-group">
                    <label for="techPhone">Technician Phone:</label>
                    <input type="tel" id="techPhone" placeholder="+12084039927">
                </div>
                <div class="form-group">
                    <label for="customerName">Customer Name:</label>
                    <input type="text" id="customerName" placeholder="Jane Doe">
                </div>
                <div class="form-group">
                    <label for="callbackNumber">Callback Number:</label>
                    <input type="tel" id="callbackNumber" placeholder="+15551234567">
                </div>
                <div class="form-group">
                    <label for="address">Incident Address:</label>
                    <input type="text" id="address" placeholder="123 Main St, Town, State">
                </div>
                <div class="form-group">
                    <label for="description">Emergency Description:</label>
                    <textarea id="description" rows="3" placeholder="No heat, urgent repair needed"></textarea>
                </div>
                <button onclick="triggerEmergency()" class="trigger-btn">ðŸš¨ Trigger Emergency</button>
            </div>
        </section>

        <!-- Debug Log Section -->
        <section class="debug-section">
            <h2>Debug & Logs</h2>
            <div class="debug-controls">
                <div class="input-group">
                    <label for="webhookUrl">Webhook URL (for log delivery):</label>
                    <input type="text" id="webhookUrl" placeholder="https://webhook.site/your-uuid">
                    <button onclick="sendLogsToWebhook()">ðŸ“¤ Send Logs</button>
                </div>
            </div>
            <div class="log-viewer">
                <h3>Recent Events Timeline</h3>
                <div id="timeline" class="timeline">
                    <p class="placeholder">Click "Load Timeline" to view recent events</p>
                </div>
                <button onclick="loadTimeline()" class="load-btn">ðŸ”„ Load Timeline</button>
            </div>
        </section>

        <!-- Response Section -->
        <section class="response-section">
            <h3>Response</h3>
            <div id="responseArea" class="response-area">
                <p class="placeholder">Actions and responses will appear here</p>
            </div>
        </section>
    </div>

    <footer>
        <p>Twilio Emergency Responder Dashboard | Built for monitoring twilio-responderAZ</p>
    </footer>

    <script src="static/js/dashboard.js"></script>
</body>
</html>
